# 并发（Concurrency）和并行（Parallelism）
并发（Concurrency）和并行（Parallelism）是计算机科学中两个重要的概念，它们在多任务处理和提高程序效率方面起着至关重要的作用。

## 一、并发（Concurrency）

**定义**：
并发是指在一个时间段内处理多个任务的能力。
并发系统能够让多个任务（线程、进程等）交替进行执行，从而使得这些任务看起来是同时进行的，即使在单核处理器上也是如此。

**特点**：
- **任务切换**：并发通过在不同任务之间快速切换来实现表面的“同时”执行。操作系统调度器负责管理这种切换。
- **共享资源**：并发任务通常共享资源（如内存、文件），需要使用同步机制（如锁、信号量）来避免竞争条件和死锁等问题。
- **例子**：一个用户界面程序同时处理用户输入和后台数据处理；Web服务器同时处理多个客户端请求。

**实现方式**：
- **线程**：同一进程内的多个线程共享进程资源，可以并发执行。
- **协程**：一种比线程更轻量级的并发单元，常见于一些现代编程语言（如Go、Python的asyncio）。
- **事件驱动**：基于事件循环和回调函数的并发模型，如JavaScript中的Node.js。

## 二、并行（Parallelism）

**定义**：
并行是指在同一时刻**真正**同时执行多个任务。并行计算依赖于多核处理器或多个处理器来同时处理不同的任务，从而提高计算效率。

**特点**：
- **真正同时**：并行在多个处理器核心上同时执行多个任务，是真正的并行执行。
- **独立任务**：并行任务通常是独立的，相互之间没有依赖关系，可以同时执行而不影响彼此。
- **例子**：科学计算中的矩阵乘法、图像处理中的并行像素操作。

**实现方式**：
- **多核处理器**：利用现代多核处理器的多个核心来同时执行多个任务。
- **分布式计算**：通过多台计算机协同工作来处理大规模计算任务，如Hadoop、Spark等大数据处理框架。

## 三、对比

| 特性      | 并发 (Concurrency)                      | 并行 (Parallelism)                        |
| --------- | --------------------------------------- | ----------------------------------------- |
| 执行方式  | 任务交替执行，看起来同时进行            | 任务真正同时执行                          |
| 依赖性    | 任务之间可能有依赖，需要同步和协调      | 任务之间通常独立，无需同步和协调          |
| 处理单元  | 线程、协程、事件驱动                    | 多核处理器、分布式计算                    |
| 资源共享  | 共享资源，需要处理资源竞争和同步问题    | 独立资源，资源竞争较少                    |
| 示例      | Web服务器处理多个请求                   | 图像处理并行操作、科学计算中的矩阵运算    |


## 四、多线程实现的是并发还是并行？
在CPU比较繁忙（假设为单核CPU），如果开启了很多个线程，则只能为一个线程分配仅有的CPU资源，这些线程就会为自己尽量多抢时间片，这就是通过多线程实现并发，线程之间会竞争CPU资源争取执行机会。
在CPU资源比较充足的时候，一个进程内的多个线程，可以被分配到不同的CPU资源，这就是通过多线程实现并行。

